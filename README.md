## Simple Room Booking System

A very small application built using Laravel 11 whose basic function is to reserve rooms for certain timeslots.

## Requirements
- PHP 8.3
- Composer
- Auth0 Application and API Credentials
- MySQL 5.7+

## Installation Guide
Generally still follows the Laravel Installation Guide from the "Initial Configuration" step. See: https://laravel.com/docs/11.x/installation

1. Clone the repository
2. Create a new database named `room_booking_system`
3. Copy the `.env.example` file and rename it to `.env`
4. Change the values of the following variables to match your environment:
```
DB_CONNECTION=mysql
DB_HOST=
DB_PORT=
DB_USERNAME=
DB_PASSWORD=
APP_PORT=
CLIENT_ORIGIN_URL=CLIENT_ORIGIN_URL
AUTH0_AUDIENCE=AUTH0_AUDIENCE
AUTH0_DOMAIN=AUTH0_DOMAIN
```
5. Add `.auth0.app.json` and `.auth0.api.json` generated for Application setup over at Auth0 by Okta or generated by using the Auth0 CLI (https://auth0.com/docs/quickstart/backend/laravel/01-authorization#sdk-configuration)
6. Run `composer install`
7. Run `php artisan migrate`
8. Run `php artisan db:seed --class=RoomsSeeder`
9. Hosted using Laravel Serve (php artisan serve)

NOTE: Admittedly, I manually imported users created from `https://manage.auth0.com/dashboard/us/<domain>/users` as I am unfamiliar with integrating this third party service.

## Available Endpoints

- GET /api/bookings/rooms
> Lists all of the rooms available for booking

-- Sample Response
```
{
    "status": "success",
    "rooms": [
        {
            "id": 1,
            "name": "Marielle Branch",
            "type": "sm",
            "created_at": "2024-05-14T11:48:36.000000Z"
        },
        {
            "id": 2,
            "name": "Melody Circles",
            "type": "sm",
            "created_at": "2024-05-14T11:48:36.000000Z"
        },
        {
            "id": 3,
            "name": "Coleman Estates",
            "type": "sm",
            "created_at": "2024-05-14T11:48:36.000000Z"
        },
        {
            "id": 4,
            "name": "Durgan Crescent",
            "type": "md",
            "created_at": "2024-05-14T11:48:36.000000Z"
        },
        {
            "id": 5,
            "name": "Gerlach Lane",
            "type": "md",
            "created_at": "2024-05-14T11:48:36.000000Z"
        },
        {
            "id": 6,
            "name": "Isaac Common",
            "type": "md",
            "created_at": "2024-05-14T11:48:36.000000Z"
        },
        {
            "id": 7,
            "name": "Kiana Prairie",
            "type": "lg",
            "created_at": "2024-05-14T11:48:36.000000Z"
        },
        {
            "id": 8,
            "name": "Noah Curve",
            "type": "lg",
            "created_at": "2024-05-14T11:48:36.000000Z"
        },
        {
            "id": 9,
            "name": "Lilla Station",
            "type": "lg",
            "created_at": "2024-05-14T11:48:36.000000Z"
        },
        {
            "id": 10,
            "name": "Heidenreich Skyway",
            "type": "xl",
            "created_at": "2024-05-14T11:48:36.000000Z"
        },
        {
            "id": 11,
            "name": "Kirstin Throughway",
            "type": "xl",
            "created_at": "2024-05-14T11:48:36.000000Z"
        },
        {
            "id": 12,
            "name": "Fisher Courts",
            "type": "xl",
            "created_at": "2024-05-14T11:48:36.000000Z"
        }
    ]
}
```

## Available Endpoints

- POST /api/bookings/rooms
> Lists all of the rooms available for booking given timeslots

 - Parameters
  - string `available_from` : The from timeslot in the format 'Y-m-d H:i'
  - string `available_to` : The to timeslot in the format 'Y-m-d H:i'

-- Sample Response
```
{
    "status": "success",
    "availableRooms": [
        {
            "id": 3,
            "name": "Coleman Estates",
            "type": "sm",
            "created_at": "2024-05-14T11:48:36.000000Z"
        },
        {
            "id": 4,
            "name": "Durgan Crescent",
            "type": "md",
            "created_at": "2024-05-14T11:48:36.000000Z"
        },
        {
            "id": 5,
            "name": "Gerlach Lane",
            "type": "md",
            "created_at": "2024-05-14T11:48:36.000000Z"
        },
        {
            "id": 6,
            "name": "Isaac Common",
            "type": "md",
            "created_at": "2024-05-14T11:48:36.000000Z"
        },
        {
            "id": 7,
            "name": "Kiana Prairie",
            "type": "lg",
            "created_at": "2024-05-14T11:48:36.000000Z"
        },
        {
            "id": 8,
            "name": "Noah Curve",
            "type": "lg",
            "created_at": "2024-05-14T11:48:36.000000Z"
        },
        {
            "id": 9,
            "name": "Lilla Station",
            "type": "lg",
            "created_at": "2024-05-14T11:48:36.000000Z"
        },
        {
            "id": 10,
            "name": "Heidenreich Skyway",
            "type": "xl",
            "created_at": "2024-05-14T11:48:36.000000Z"
        },
        {
            "id": 11,
            "name": "Kirstin Throughway",
            "type": "xl",
            "created_at": "2024-05-14T11:48:36.000000Z"
        },
        {
            "id": 12,
            "name": "Fisher Courts",
            "type": "xl",
            "created_at": "2024-05-14T11:48:36.000000Z"
        }
    ]
}
```

- GET /api/bookings/my-bookings
> Bookings made by the Authenticated User

-- Sample Response
```
{
    "status": "success",
    "bookings": [
        {
            "id": 1,
            "user_id": 1,
            "room_id": 1,
            "reserved_from": "2024-05-15 19:20:52",
            "reserved_to": "2024-05-15 20:20:52",
            "created_at": "2024-05-15T19:20:52.000000Z",
            "updated_at": "2024-05-15T19:20:52.000000Z",
            "room": {
                "id": 1,
                "name": "Marielle Branch",
                "type": "sm",
                "created_at": "2024-05-14T11:48:36.000000Z"
            }
        },
        {
            "id": 2,
            "user_id": 1,
            "room_id": 2,
            "reserved_from": "2024-05-15 19:00:00",
            "reserved_to": "2024-05-16 00:00:00",
            "created_at": "2024-05-15T11:49:54.000000Z",
            "updated_at": "2024-05-15T11:49:54.000000Z",
            "room": {
                "id": 2,
                "name": "Melody Circles",
                "type": "sm",
                "created_at": "2024-05-14T11:48:36.000000Z"
            }
        },
        {
            "id": 3,
            "user_id": 1,
            "room_id": 1,
            "reserved_from": "2024-05-16 19:00:00",
            "reserved_to": "2024-05-17 00:00:00",
            "created_at": "2024-05-15T11:50:13.000000Z",
            "updated_at": "2024-05-15T11:50:13.000000Z",
            "room": {
                "id": 1,
                "name": "Marielle Branch",
                "type": "sm",
                "created_at": "2024-05-14T11:48:36.000000Z"
            }
        },
        {
            "id": 4,
            "user_id": 1,
            "room_id": 8,
            "reserved_from": "2024-05-16 19:00:00",
            "reserved_to": "2024-05-17 00:00:00",
            "created_at": "2024-05-15T11:57:02.000000Z",
            "updated_at": "2024-05-15T11:57:02.000000Z",
            "room": {
                "id": 8,
                "name": "Noah Curve",
                "type": "lg",
                "created_at": "2024-05-14T11:48:36.000000Z"
            }
        }
    ]
}
``` 

- GET /api/bookings/add
> Add a booking under the current Authenticated User

- Parameters
 - int `room_id`  : The ID of the Room the user wishes to reserve
 - string `reserve_from`  : Desired from timeslot to reserve in the format 'Y-m-d H:i'
 - string `reserve_to` : Desired to timeslot to reserve in the format 'Y-m-d H:i'

-- Sample Response
```
{
    "status": "success",
    "message": "Room has been reserved.",
    "booking": {
        "user_id": 1,
        "room_id": 5,
        "reserved_from": "2024-05-16T19:00:00.000000Z",
        "reserved_to": "2024-05-17T00:00:00.000000Z",
        "updated_at": "2024-05-15T12:35:49.000000Z",
        "created_at": "2024-05-15T12:35:49.000000Z",
        "id": 5
    }
}
```
## Postman Collection
An unclean one; but if it helps, by all means feel free to use it.
[Room Booking System API.postman_collection.json](https://github.com/edwinflores/room-booking-system/files/15321513/Room.Booking.System.API.postman_collection.json)
